<mat-drawer-container class="example-container">
  <mat-drawer #drawer mode="side">
      <!-- Task BPMN Type-->
      <mat-card fxLayout="column" *ngIf="activeEl?.ShapeType == shapesType.TASK" fxFlexAlign="start" >
        <mat-form-field fxFlex>
            <input type="text" matInput placeholder="Element Id" [(ngModel)]="activeEl.Id" (change)="bpmnView.updateId(activeEl._id,activeEl.Id)">
        </mat-form-field>
        <mat-form-field fxFlex>
          <mat-select placeholder="Task Type" [(ngModel)]="activeEl.Properties.Type">
            <mat-option *ngFor="let item of taskTypes" [value]="item">{{ item }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field fxFlex>
          <input type="text" matInput placeholder="formId" [(ngModel)]="activeEl.Properties.FormId">
        </mat-form-field>
        <mat-form-field fxFlex>
          <input type="text" matInput placeholder="Endpoint" [(ngModel)]="activeEl.Properties.Endpoint">
        </mat-form-field>
        <mat-form-field fxFlex>
          <input type="text" matInput placeholder="Route" [(ngModel)]="activeEl.Properties.Route">
        </mat-form-field>
      </mat-card>
      <!-- Event BPMN Type-->
      <mat-card fxLayout="column" *ngIf="activeEl?.ShapeType == shapesType.EVENT" fxFlexAlign="start" >
        <mat-form-field fxFlex>
            <input type="text" matInput placeholder="formId" [(ngModel)]="activeEl.Id" (change)="bpmnView.updateId(activeEl._id,activeEl.Id)">
        </mat-form-field>
        <mat-form-field fxFlex>
          <mat-select placeholder="Event Type" [(ngModel)]="activeEl.Properties.Type">
            <mat-option *ngFor="let item of eventTypes" [value]="item">{{ item }}</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-card>
      <!-- Flows BPMN Type-->
      <mat-card fxLayout="column" *ngIf="activeFlowIdx!==undefined" fxFlexAlign="start" >
        <mat-form-field fxFlex>
            <input type="text" matInput placeholder="Flow Id"  [(ngModel)]="activeEl.Flows[activeFlowIdx].Id" (change)="bpmnView.updateId(activeEl._id,activeEl.Id)">
        </mat-form-field>
          <mat-form-field fxFlex>
            <mat-select placeholder="Flow Type" [(ngModel)]="activeEl.Flows[activeFlowIdx].Properties.Type">
              <mat-option *ngFor="let item of actionTypes" [value]="item">{{ item }}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field fxFlex>
            <input type="text" matInput placeholder="Condition" [(ngModel)]="activeEl.Flows[activeFlowIdx].Properties.Condition">
          </mat-form-field>
          <mat-form-field fxFlex>
              <input type="text" matInput placeholder="Route" [(ngModel)]="activeEl.Flows[activeFlowIdx].Properties.Route">
          </mat-form-field>
      </mat-card>
    </mat-drawer>
    <mat-drawer-content>
      
      <mat-grid-list cols="4" rowHeight="calc(100vh - 70px)">
        <mat-grid-tile colspan="1"rowspan="1">
          <mat-card [formGroup]="formGroup"  fxFlexAlign="start">
            <mat-form-field>
              <input type="text" matInput placeholder="نام فرایند" formControlName="Name">
            </mat-form-field>
            <mat-card-actions>
              <button mat-raised-button color="primary" (click)="bpmnView.getFlow()">
                <mat-icon aria-label="icon-button">add</mat-icon>
              </button>
            </mat-card-actions>
          </mat-card>
        </mat-grid-tile>
        <mat-grid-tile colspan="3"rowspan="1">
          <div fxFlex="1 1 auto" fxFlexAlign="stretch">
            <ngs-bpmn-view #bpmnView
              [flow]="flow"
              (submit)="upsert()"
              (elementHover)="elementHover($event)"
              (elementOut)="elementOut($event)"
              (elementClick)="elementClick($event)"
              (elementMousedown)="elementMousedown($event)"
              (elementMouseup)="elementMouseup($event)"
              ></ngs-bpmn-view>
              <!-- (elementDblclick)="flow($event)" -->
          </div>
        </mat-grid-tile>
      </mat-grid-list>

    </mat-drawer-content>
  </mat-drawer-container>